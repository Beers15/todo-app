(this["webpackJsonpclass-32-solution-todo"]=this["webpackJsonpclass-32-solution-todo"]||[]).push([[0],{185:function(e,t,n){},189:function(e,t,n){"use strict";n.r(t);var a=n(71),s=n(72),i=n(80),c=n(78),r=n(0),l=n.n(r),o=n(12),u=n.n(o),d=n(6),j=n(30),b=n(9),m=n(22),O=n(20),h=n.n(O),g=n(29),p=n(39),f=n.n(p),x=n(45),v=n.n(x),C=n(1),y=l.a.createContext(),S=function(e){var t=e.children,n=Object(r.useState)(!1),a=Object(d.a)(n,2),s=a[0],i=a[1],c=Object(r.useState)({capabilities:[]}),l=Object(d.a)(c,2),o=l[0],u=l[1];Object(r.useEffect)((function(){var e=new URLSearchParams(window.location.search);f.a.save("auth",e.get("token")||f.a.load("auth")||null)}),[]);var j=function(){var e=Object(g.a)(h.a.mark((function e(t,n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t&&""!==n){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,v.a.post("https://api-integration-server.herokuapp.com/signin",{},{auth:{username:t,password:n}});case 5:a=e.sent,m(!0,a.data.user),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}(),b=function(){var e=Object(g.a)(h.a.mark((function e(t,n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t&&""!==n){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,v.a.post("https://api-integration-server.herokuapp.com/signup",{username:t,password:n,role:"admin"});case 5:a=e.sent,m(!0,a.data.user),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(2),console.log(e.t0),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}(),m=function(e,t){f.a.save("auth",null===t||void 0===t?void 0:t.token),i(e),u(t)},O={loggedIn:s,user:o,can:function(e){var t,n;return null===O||void 0===O||null===(t=O.user)||void 0===t||null===(n=t.capabilities)||void 0===n?void 0:n.includes(e)},login:j,logout:function(){m(!1,null,{})},register:b};return Object(C.jsx)(y.Provider,{value:O,children:t})},w=function(e){var t=Object(r.useContext)(y).loggedIn,n=!e.capability||settings.can(e.capability),a=t&&n;return Object(C.jsx)(m.a,{condition:a,children:e.children})},N=n(193),P=function(e){var t=Object(r.useContext)(y);return Object(C.jsx)("nav",{className:"bp3-navbar bp3-light","data-testid":"header",children:Object(C.jsxs)("div",{className:"nav-style",children:[Object(C.jsx)("div",{className:"bp3-navbar-group bp3-align-left",children:Object(C.jsx)("div",{className:"nav-heading bp3-icon-list-detail-view",children:Object(C.jsx)(j.b,{to:"/",children:" To Do List"})})}),Object(C.jsxs)("div",{className:"bp3-navbar-group bp3-align-right",children:[Object(C.jsx)(m.a,{condition:t.loggedIn,children:Object(C.jsx)(j.b,{to:"/settings","data-testid":"settings",children:"Settings"})}),Object(C.jsx)("span",{className:"bp3-navbar-divider"}),e.incomplete>0&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsxs)("span",{className:"bp3-icon-tick",children:[e.incomplete," items pending"]}),Object(C.jsx)("span",{className:"bp3-navbar-divider"})]}),Object(C.jsx)(m.a,{condition:t.loggedIn,children:Object(C.jsx)(N.b,{"data-testid":"logout",onClick:t.logout,children:"Log Out"})})]})]})})},I=n(79),k=n(38),T=n(49),L=function(e){var t=Object(r.useState)({}),n=Object(d.a)(t,2),a=n[0],s=n[1];return{handleChange:function(e){e.persist(),s((function(t){return Object(T.a)(Object(T.a)({},t),{},Object(k.a)({},e.target.name,e.target.value))}))},handleSubmit:function(t){t&&t.preventDefault(),e(a)},values:a}},B=l.a.createContext(),D=function(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(3),c=Object(d.a)(i,2),l=c[0],o=c[1],u=Object(r.useState)("assignee"),j=Object(d.a)(u,2),b=j[0],m=j[1],O=Object(r.useState)(!0),h=Object(d.a)(O,2),g=h[0],p=h[1];Object(r.useEffect)((function(){if(g)p(!1);else{var e=[a,l,b];localStorage.setItem("settings",JSON.stringify(e))}}),[a,l,b]),Object(r.useEffect)((function(){if(localStorage.getItem("settings")){var e=JSON.parse(localStorage.getItem("settings"));console.log("SETTINGS FROM LAST TIME: ",e[0],e[1],e[2]),s(e[0]||!1),o(e[1]||3),m(e[2]||"difficultyHighToLow")}}),[]);var f={showCompleted:a,setCompleted:s,numItemsPerPage:l,setNumItemsPerPage:o,sortBy:b,setSortBy:m};return Object(C.jsx)(B.Provider,{value:f,children:e.children})},E=n(18),A=function(e){return Object(C.jsxs)(N.c,{className:"todo-item-card",interactive:!0,elevation:E.a.TWO,"data-testid":"todoItem",children:[Object(C.jsxs)("h4",{children:["Task: ",e.item.text]}),Object(C.jsx)("p",{"data-testid":"todo-assignee",children:Object(C.jsxs)("small",{children:["Assigned to: ",e.item.assignee]})}),Object(C.jsx)("p",{"data-testid":"todo-difficulty",children:Object(C.jsxs)("small",{children:["Difficulty: ",e.item.difficulty]})}),Object(C.jsx)("p",{"data-testid":"todo-completed",children:Object(C.jsxs)("small",{children:["Complete: ",e.item.complete.toString()]})}),!e.item.complete&&Object(C.jsx)(N.b,{onClick:function(){return e.toggleComplete(e.item.id)},icon:"tick",intent:"success",children:"Mark Complete"})," ",Object(C.jsx)(N.b,{onClick:function(){return e.deleteItem(e.item.id)},icon:"cross",intent:"danger",children:"Delete"})]})},H=function(e){var t=Object(r.useContext)(B),n=Object(r.useState)(0),a=Object(d.a)(n,2),s=a[0],i=a[1],c=function(n){if(t.sortBy)switch(t.sortBy){case"difficultyLowToHigh":n.sort((function(e,t){return(e.difficulty||0)-(t.difficulty||0)}));break;case"difficultyHighToLow":n.sort((function(e,t){var n=e.difficulty||0;return(t.difficulty||0)-n}));break;case"assignee":n.sort((function(e,t){var n=e.assignee||"z",a=t.assignee||"z";return n.localeCompare(a)}))}return n.slice(s,s+t.numItemsPerPage).map((function(t,n){return Object(C.jsx)(A,{deleteItem:e.deleteItem,toggleComplete:e.toggleComplete,item:t},n)}))};return Object(C.jsxs)("div",{className:"list-margin",children:[Object(C.jsx)("div",{className:"list-flex-container",children:"true"===t.showCompleted?c(e.list):c(e.list.filter((function(e){if(0==e.complete)return!0})))}),s>t.numItemsPerPage-1&&Object(C.jsx)(N.b,{onClick:function(){i(s-t.numItemsPerPage)},icon:"arrow-left",intent:"primary",children:"Previous Page"}),e.list.length>t.numItemsPerPage&&s<e.list.length-1&&Object(C.jsx)(N.b,{onClick:function(){i(s+t.numItemsPerPage)},icon:"arrow-right",intent:"primary",children:"Next Page"})]})},W=function(e){return Object(C.jsxs)("form",{onSubmit:e.handleSubmit,"data-testid":"todo-form",children:[Object(C.jsxs)("div",{className:"bp3-callout bp3-intent-success form-caption",children:[Object(C.jsx)("h4",{className:"bp3-heading",children:"Add To Do Item"}),"Get organized, get things done."]}),Object(C.jsx)(N.c,{interactive:!1,elevation:E.a.TWO,children:Object(C.jsxs)(N.d,{minimal:!0,children:[Object(C.jsx)("span",{children:"To Do Item"}),Object(C.jsx)(N.e,{className:"input-item",onChange:e.handleChange,name:"text",type:"text",placeholder:"Item Details","data-testid":"item-details"}),Object(C.jsx)("span",{children:"Assigned To"}),Object(C.jsx)(N.e,{className:"input-item",onChange:e.handleChange,name:"assignee",type:"text",placeholder:"Assignee Name","data-testid":"item-assignee"}),Object(C.jsx)("span",{className:"slider-label",children:"Difficulty"}),Object(C.jsx)("br",{}),Object(C.jsx)("input",{className:"slider",onChange:e.handleChange,name:"difficulty",type:"range",defaultValue:"3",min:1,max:5,"data-testid":"item-difficulty"}),Object(C.jsx)("br",{}),Object(C.jsx)(N.b,{className:"submit-btn",type:"submit",intent:"success","data-testid":"todo-submit-btn",children:"Add Item"})]})})]})},F=n(194),R=function(e){var t=L((function(t){t.id=Object(F.a)(),t.complete=!1,e.list.includes(t)?alert("Entry already exists"):e.setList([].concat(Object(I.a)(e.list),[t]))})),n=t.handleChange,a=t.handleSubmit;return Object(r.useEffect)((function(){var t=e.list.filter((function(e){return!e.complete})).length;e.setIncomplete(t),document.title="To Do List: ".concat(e.incomplete)}),[e.list]),Object(r.useEffect)((function(){document.title="To Do List: ".concat(e.incomplete)}),[]),Object(C.jsx)(C.Fragment,{children:Object(C.jsxs)("div",{className:"flex-container",children:[Object(C.jsx)(W,{handleSubmit:a,handleChange:n}),e.list.length>0&&Object(C.jsx)(H,{list:e.list,deleteItem:function(t){var n=e.list.filter((function(e){return e.id!==t}));e.setList(n)},toggleComplete:function(t){var n=e.list.map((function(e){return e.id==t&&(e.complete=!e.complete),e}));e.setList(n)}})]})})},U=function(){Object(r.useEffect)((function(){return function(){m(!1)}}),[]);var e=Object(r.useContext)(y),t=Object(r.useState)(""),n=Object(d.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(""),c=Object(d.a)(i,2),l=c[0],o=c[1],u=Object(r.useState)(!1),j=Object(d.a)(u,2),b=j[0],m=j[1],O=function(e){"username"===e.target.name&&s(e.target.value),"password"===e.target.name&&o(e.target.value)},p=function(){var t=Object(g.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,e.login(a,l);case 3:t.sent||m(!0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(N.c,{interactive:!1,elevation:E.a.TWO,children:Object(C.jsxs)("form",{onSubmit:p,children:[Object(C.jsx)(N.e,{"data-testid":"username-field",className:"margin-1",placeholder:"UserName",name:"username",onChange:O}),Object(C.jsx)(N.e,{"data-testid":"password-field",className:"margin-1",placeholder:"password",name:"password",type:"password",onChange:O}),Object(C.jsx)(N.b,{className:"submit-btn",type:"submit",intent:"success","data-testid":"login",children:"Login"})]})}),Object(C.jsx)(N.a,{confirmButtonText:"X",isOpen:b,loading:!1,onClose:function(){m(!1)},children:Object(C.jsx)("p",{children:"Unable to login with those credentials. Please try again."})})]})},G=function(){var e=Object(r.useContext)(y),t=Object(r.useState)(""),n=Object(d.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(""),c=Object(d.a)(i,2),l=c[0],o=c[1],u=Object(r.useState)(!1),j=Object(d.a)(u,2),b=j[0],m=j[1],O=function(e){"username"===e.target.name&&s(e.target.value),"password"===e.target.name&&o(e.target.value)};return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(N.c,{interactive:!1,elevation:E.a.TWO,children:Object(C.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.register(a,l)||m(!0)},children:[Object(C.jsx)(N.e,{"data-testid":"username-field-reg",className:"margin-1",placeholder:"UserName",name:"username",onChange:O}),Object(C.jsx)(N.e,{"data-testid":"password-field-reg",className:"margin-1",placeholder:"password",name:"password",type:"password",onChange:O}),Object(C.jsx)(N.b,{className:"submit-btn",type:"submit",intent:"success","data-testid":"register",children:"Register"})]})}),Object(C.jsx)(N.a,{confirmButtonText:"X",isOpen:b,loading:!1,onClose:function(){m(!1)},children:Object(C.jsx)("p",{children:"Unable to make an account with those credentials. Please try another username."})})]})},J=function(){var e=Object(r.useContext)(y);return Object(C.jsx)("div",{className:"flex-container",children:Object(C.jsx)(m.a,{condition:!e.loggedIn,children:Object(C.jsxs)(N.i,{animate:!0,children:[Object(C.jsx)(N.h,{id:"login",title:"Login",panel:Object(C.jsx)(U,{}),"data-testid":"login-tab"}),Object(C.jsx)(N.h,{id:"register",title:"Register",panel:Object(C.jsx)(G,{}),"data-testid":"register-tab"}),Object(C.jsx)(N.i.Expander,{})]})})})},M=function(){var e=Object(r.useContext)(B),t=L((function(t){e.setCompleted(t["Blueprint3.RadioGroup-0"]||e.setCompleted),e.setSortBy(t["Blueprint3.RadioGroup-1"]||e.sortBy),e.setNumItemsPerPage(t.itemsPerPage||e.setNumItemsPerPage),g(!0)})),n=t.handleChange,a=t.handleSubmit,s=Object(r.useState)(),i=Object(d.a)(s,2),c=i[0],l=i[1],o=Object(r.useState)(),u=Object(d.a)(o,2),j=u[0],b=u[1],m=Object(r.useState)(!1),O=Object(d.a)(m,2),h=O[0],g=O[1];return Object(C.jsxs)("div",{className:"flex-container",children:[Object(C.jsxs)("form",{onSubmit:a,children:[Object(C.jsxs)("div",{className:"bp3-callout bp3-intent-success form-caption",children:[Object(C.jsx)("h4",{className:"bp3-heading",children:"Modify App Settings"}),"Todo the Way You Want to"]}),Object(C.jsx)(N.c,{interactive:!1,elevation:E.a.TWO,children:Object(C.jsxs)(N.d,{minimal:!0,children:[Object(C.jsx)("label",{htmlFor:"itemsPerPages",children:"Number of Todo Items Per Page"}),Object(C.jsx)(N.e,{type:"number",id:"itemsPerPage",name:"itemsPerPage",min:"1",max:"20",onChange:n,"data-testid":"settings-itemsPerPage"}),Object(C.jsx)("br",{}),Object(C.jsxs)(N.g,{label:"Show Completed Items",onChange:n,selectedValue:j,children:[Object(C.jsx)(N.f,{label:"Yes! I want to keep track of what I've done.",onClick:function(e){return b(e.target.value)},value:"true","data-testid":"settings-showCompleted"}),Object(C.jsx)(N.f,{label:"No! It's in the past.",onClick:function(e){return b(e.target.value)},value:"false"})]}),Object(C.jsx)("br",{}),Object(C.jsxs)(N.g,{label:"Sort By",onChange:n,selectedValue:c,children:[Object(C.jsx)(N.f,{label:"Difficulty: High to Low",onClick:function(e){return l(e.target.value)},value:"difficultyHighToLow","data-testid":"settings-sortBy"}),Object(C.jsx)(N.f,{label:"Difficulty: Low to High",onClick:function(e){return l(e.target.value)},value:"difficultyLowToHigh"}),Object(C.jsx)(N.f,{label:"Assignee",onClick:function(e){return l(e.target.value)},value:"assignee"})]}),Object(C.jsx)("br",{}),Object(C.jsx)(N.b,{className:"submit-btn",type:"submit",intent:"success","data-testid":"settings-submit",children:"Confirm Changes"})]})})]}),Object(C.jsx)(N.a,{confirmButtonText:"X",isOpen:h,loading:!1,onClose:function(){g(!1)},children:Object(C.jsx)("p",{children:"Your settings have been applied! Some settings may not go into affect until refresh."})})]})},z=(n(185),function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)([]),i=Object(d.a)(s,2),c=i[0],l=i[1];return Object(C.jsxs)(j.a,{children:[Object(C.jsx)(P,{incomplete:n}),Object(C.jsx)(J,{"data-testid":"login-and-register"}),Object(C.jsxs)(b.c,{children:[Object(C.jsx)(b.a,{exact:!0,path:"/",children:Object(C.jsx)(w,{children:Object(C.jsx)(R,{setIncomplete:a,incomplete:n,setList:l,list:c})})}),Object(C.jsx)(b.a,{path:"/settings",children:Object(C.jsx)(w,{children:Object(C.jsx)(M,{})})}),Object(C.jsx)(b.a,{path:"*",children:Object(C.jsx)(w,{children:Object(C.jsx)(R,{setIncomplete:a,incomplete:n,setList:l,list:c})})})]})]})}),V=(n(186),n(187),n(188),function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(C.jsx)(D,{children:Object(C.jsx)(S,{children:Object(C.jsx)(z,{})})})}}]),n}(l.a.Component)),X=document.getElementById("root");u.a.render(Object(C.jsx)(V,{}),X)}},[[189,1,2]]]);
//# sourceMappingURL=main.8acf53b1.chunk.js.map