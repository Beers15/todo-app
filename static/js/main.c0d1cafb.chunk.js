(this["webpackJsonpclass-32-solution-todo"]=this["webpackJsonpclass-32-solution-todo"]||[]).push([[0],{249:function(e,t){},251:function(e,t){},265:function(e,t){},267:function(e,t){},295:function(e,t){},297:function(e,t){},298:function(e,t){},303:function(e,t){},305:function(e,t){},311:function(e,t){},313:function(e,t){},332:function(e,t){},344:function(e,t){},347:function(e,t){},394:function(e,t,n){},398:function(e,t,n){"use strict";n.r(t);var i=n(173),c=n(174),a=n(182),s=n(180),o=n(0),l=n.n(o),r=n(16),d=n.n(r),u=n(11),j=n(51),b=n(10),m=n(50),O=n(95),f=n.n(O),h=n(64),g=n.n(h),p=n(1),x={admin:{password:"password",username:"admin",role:"admin",capabilities:["create","read","update","delete"]},editor:{password:"password",username:"editor",role:"editor",capabilities:["read","create","update"]},writer:{password:"password",username:"writer",role:"writer",capabilities:["create","read"]}},v=l.a.createContext(),S=function(e){var t=e.children,n=Object(o.useState)(!1),i=Object(u.a)(n,2),c=i[0],a=i[1],s=Object(o.useState)({capabilities:[]}),l=Object(u.a)(s,2),r=l[0],d=l[1];Object(o.useEffect)((function(){var e=new URLSearchParams(window.location.search),t=f.a.load("auth"),n=e.get("token")||t||null;b(n)}),[]);var j={loggedIn:c,user:r,can:function(e){var t,n;return null===j||void 0===j||null===(t=j.user)||void 0===t||null===(n=t.capabilities)||void 0===n?void 0:n.includes(e)},login:function(e,t){if(x[e]){var n=g.a.sign(x[e],Object({NODE_ENV:"production",PUBLIC_URL:"/todo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SECRET||"SECRET");b(n)}else console.log("INVALID LOGIN")},logout:function(){m(!1,null,{})},register:function(e,t){if(x[e])console.log("USER ALREADY EXISTS");else{x[e]={username:e,password:t,role:"admin",capabilities:["create","read","update","delete"]};var n=g.a.sign(x[e],Object({NODE_ENV:"production",PUBLIC_URL:"/todo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SECRET||"SECRET");b(n)}}},b=function(e){try{var t=g.a.verify(e,Object({NODE_ENV:"production",PUBLIC_URL:"/todo-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SECRET||"SECRET");m(!0,e,t)}catch(n){m(!1,null,{}),console.log("Token Validation Error",n)}},m=function(e,t,n){f.a.save("auth",t),a(e),d(n)};return Object(p.jsx)(v.Provider,{value:j,children:t})},C=function(e){var t=Object(o.useContext)(v).loggedIn,n=!e.capability||settings.can(e.capability),i=t&&n;return Object(p.jsx)(m.a,{condition:i,children:e.children})},T=function(e){return Object(p.jsx)("nav",{className:"bp3-navbar bp3-light","data-testid":"header",children:Object(p.jsxs)("div",{className:"nav-style",children:[Object(p.jsx)("div",{className:"bp3-navbar-group bp3-align-left",children:Object(p.jsx)("div",{className:"nav-heading bp3-icon-list-detail-view",children:Object(p.jsx)(j.b,{to:"/",children:" To Do List"})})}),Object(p.jsxs)("div",{className:"bp3-navbar-group bp3-align-right",children:[Object(p.jsx)(j.b,{to:"/settings",children:"Settings"}),Object(p.jsx)("span",{className:"bp3-navbar-divider"}),Object(p.jsxs)("span",{className:"bp3-icon-tick",children:[" ",e.incomplete," items pending"]})]})]})})},E=n(181),P=n(63),y=n(97),I=function(e){var t=Object(o.useState)({}),n=Object(u.a)(t,2),i=n[0],c=n[1];return{handleChange:function(e){e.persist(),c((function(t){return Object(y.a)(Object(y.a)({},t),{},Object(P.a)({},e.target.name,e.target.value))}))},handleSubmit:function(t){t&&t.preventDefault(),e(i)},values:i}},N=l.a.createContext(),w=function(e){var t=Object(o.useState)(!1),n=Object(u.a)(t,2),i=n[0],c=n[1],a=Object(o.useState)(3),s=Object(u.a)(a,2),l=s[0],r=s[1],d=Object(o.useState)("assignee"),j=Object(u.a)(d,2),b=j[0],m=j[1],O=Object(o.useState)(!0),f=Object(u.a)(O,2),h=f[0],g=f[1];Object(o.useEffect)((function(){if(h)g(!1);else{var e=[i,l,b];localStorage.setItem("settings",JSON.stringify(e))}}),[i,l,b]),Object(o.useEffect)((function(){if(localStorage.getItem("settings")){var e=JSON.parse(localStorage.getItem("settings"));console.log("SETTINGS FROM LAST TIME: ",e[0],e[1],e[2]),c(e[0]||!1),r(e[1]||3),m(e[2]||"difficultyHighToLow")}}),[]);var x={showCompleted:i,setCompleted:c,numItemsPerPage:l,setNumItemsPerPage:r,sortBy:b,setSortBy:m};return Object(p.jsx)(N.Provider,{value:x,children:e.children})},_=n(402),L=n(27),D=function(e){return Object(p.jsxs)(_.b,{className:"todo-item-card",interactive:!0,elevation:L.a.TWO,"data-testid":"todoItem",children:[Object(p.jsxs)("h4",{children:["Task: ",e.item.text]}),Object(p.jsx)("p",{children:Object(p.jsxs)("small",{children:["Assigned to: ",e.item.assignee]})}),Object(p.jsx)("p",{children:Object(p.jsxs)("small",{children:["Difficulty: ",e.item.difficulty]})}),Object(p.jsx)("p",{children:Object(p.jsxs)("small",{children:["Complete: ",e.item.complete.toString()]})}),!e.item.complete&&Object(p.jsx)(_.a,{onClick:function(){return e.toggleComplete(e.item.id)},icon:"tick",intent:"success",children:"Mark Complete"})," ",Object(p.jsx)(_.a,{onClick:function(){return e.deleteItem(e.item.id)},icon:"cross",intent:"danger",children:"Delete"})]})},R=function(e){var t=Object(o.useContext)(N),n=Object(o.useState)(0),i=Object(u.a)(n,2),c=i[0],a=i[1],s=function(n){if(t.sortBy)switch(t.sortBy){case"difficultyLowToHigh":n.sort((function(e,t){return(e.difficulty||0)-(t.difficulty||0)}));break;case"difficultyHighToLow":n.sort((function(e,t){var n=e.difficulty||0;return(t.difficulty||0)-n}));break;case"assignee":n.sort((function(e,t){var n=e.assignee||"z",i=t.assignee||"z";return n.localeCompare(i)}))}return n.slice(c,c+t.numItemsPerPage).map((function(t,n){return Object(p.jsx)(D,{deleteItem:e.deleteItem,toggleComplete:e.toggleComplete,item:t},n)}))};return Object(p.jsxs)("div",{className:"list-margin",children:[Object(p.jsx)("div",{className:"list-flex-container",children:t.showCompleted?s(e.list):s(e.list.filter((function(e){if(0==e.complete)return!0})))}),c>t.numItemsPerPage-1&&Object(p.jsx)(_.a,{onClick:function(){a(c-t.numItemsPerPage)},icon:"arrow-left",intent:"primary",children:"Previous Page"}),e.list.length>t.numItemsPerPage&&c<e.list.length-1&&Object(p.jsx)(_.a,{onClick:function(){a(c+t.numItemsPerPage)},icon:"arrow-right",intent:"primary",children:"Next Page"})]})},k=function(e){return Object(p.jsxs)("form",{onSubmit:e.handleSubmit,"data-testid":"todo-form",children:[Object(p.jsxs)("div",{className:"bp3-callout bp3-intent-success form-caption",children:[Object(p.jsx)("h4",{className:"bp3-heading",children:"Add To Do Item"}),"Get organized, get things done."]}),Object(p.jsx)(_.b,{interactive:!1,elevation:L.a.TWO,children:Object(p.jsxs)(_.c,{minimal:!0,children:[Object(p.jsx)("span",{children:"To Do Item"}),Object(p.jsx)(_.d,{className:"input-item",onChange:e.handleChange,name:"text",type:"text",placeholder:"Item Details","data-testid":"item-details"}),Object(p.jsx)("span",{children:"Assigned To"}),Object(p.jsx)(_.d,{className:"input-item",onChange:e.handleChange,name:"assignee",type:"text",placeholder:"Assignee Name","data-testid":"item-assignee"}),Object(p.jsx)("span",{className:"slider-label",children:"Difficulty"}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{className:"slider",onChange:e.handleChange,name:"difficulty",type:"range",defaultValue:"3",min:1,max:5,"data-testid":"item-difficulty"}),Object(p.jsx)("br",{}),Object(p.jsx)(_.a,{className:"submit-btn",type:"submit",intent:"success","data-testid":"todo-submit-btn",children:"Add Item"})]})})]})},A=n(403),H=function(e){var t=I((function(t){t.id=Object(A.a)(),t.complete=!1,e.list.includes(t)?alert("Entry already exists"):e.setList([].concat(Object(E.a)(e.list),[t]))})),n=t.handleChange,i=t.handleSubmit;return Object(o.useEffect)((function(){var t=e.list.filter((function(e){return!e.complete})).length;e.setIncomplete(t),document.title="To Do List: ".concat(e.incomplete)}),[e.list]),Object(o.useEffect)((function(){document.title="To Do List: ".concat(e.incomplete)}),[]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"flex-container",children:[Object(p.jsx)(k,{handleSubmit:i,handleChange:n}),e.list.length>0&&Object(p.jsx)(R,{list:e.list,deleteItem:function(t){var n=e.list.filter((function(e){return e.id!==t}));e.setList(n)},toggleComplete:function(t){var n=e.list.map((function(e){return e.id==t&&(e.complete=!e.complete),e}));e.setList(n)}})]})})},W=function(){var e=Object(o.useContext)(v),t=Object(o.useState)(""),n=Object(u.a)(t,2),i=n[0],c=n[1],a=Object(o.useState)(""),s=Object(u.a)(a,2),l=s[0],r=s[1],d=function(e){"username"===e.target.name&&c(e.target.value),"password"===e.target.name&&r(e.target.value)};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(m.a,{condition:e.loggedIn,children:Object(p.jsx)("button",{"data-testid":"logout",onClick:e.logout,children:"Log Out"})}),Object(p.jsx)(m.a,{condition:!e.loggedIn,children:Object(p.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.login(i,l)},children:[Object(p.jsx)("input",{"data-testid":"username-field",placeholder:"UserName",name:"username",onChange:d}),Object(p.jsx)("input",{"data-testid":"password-field",placeholder:"password",name:"password",onChange:d}),Object(p.jsx)("button",{"data-testid":"login",children:"Login"})]})})]})},B=function(){var e=Object(o.useContext)(N),t=I((function(t){e.setCompleted(t["Blueprint3.RadioGroup-0"]||e.setCompleted),e.setSortBy(t["Blueprint3.RadioGroup-1"]||e.sortBy),e.setNumItemsPerPage(t.itemsPerPage||e.setNumItemsPerPage),alert("Your settings have been applied!")})),n=t.handleChange,i=t.handleSubmit,c=Object(o.useState)(),a=Object(u.a)(c,2),s=a[0],l=a[1],r=Object(o.useState)(),d=Object(u.a)(r,2),j=d[0],b=d[1];return Object(p.jsx)("div",{className:"flex-container",children:Object(p.jsxs)("form",{onSubmit:i,children:[Object(p.jsxs)("div",{className:"bp3-callout bp3-intent-success form-caption",children:[Object(p.jsx)("h4",{className:"bp3-heading",children:"Modify App Settings"}),"Todo the Way You Want to"]}),Object(p.jsx)(_.b,{interactive:!1,elevation:L.a.TWO,children:Object(p.jsxs)(_.c,{minimal:!0,children:[Object(p.jsx)("label",{htmlFor:"itemsPerPages",children:"Number of Todo Items Per Page"}),Object(p.jsx)(_.d,{type:"number",id:"itemsPerPage",name:"itemsPerPage",min:"1",max:"20",onChange:n}),Object(p.jsx)("br",{}),Object(p.jsxs)(_.f,{label:"Show Completed Items",onChange:n,selectedValue:j,children:[Object(p.jsx)(_.e,{label:"Yes! I want to keep track of what I've done.",onClick:function(e){return b(e.target.value)},value:"true"}),Object(p.jsx)(_.e,{label:"No! It's in the past.",onClick:function(e){return b(e.target.value)},value:"false"})]}),Object(p.jsx)("br",{}),Object(p.jsxs)(_.f,{label:"Sort By",onChange:n,selectedValue:s,children:[Object(p.jsx)(_.e,{label:"Difficulty: High to Low",onClick:function(e){return l(e.target.value)},value:"difficultyHighToLow"}),Object(p.jsx)(_.e,{label:"Difficulty: Low to High",onClick:function(e){return l(e.target.value)},value:"difficultyLowToHigh"}),Object(p.jsx)(_.e,{label:"Assignee",onClick:function(e){return l(e.target.value)},value:"assignee"})]}),Object(p.jsx)("br",{}),Object(p.jsx)(_.a,{className:"submit-btn",type:"submit",intent:"success",children:"Confirm Changes"})]})})]})})},F=(n(394),function(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),n=t[0],i=t[1],c=Object(o.useState)([]),a=Object(u.a)(c,2),s=a[0],l=a[1];return Object(p.jsxs)(j.a,{children:[Object(p.jsx)(T,{incomplete:n}),Object(p.jsx)(W,{"data-testid":"login"}),Object(p.jsxs)(b.c,{children:[Object(p.jsx)(b.a,{exact:!0,path:"/",children:Object(p.jsx)(C,{children:Object(p.jsx)(H,{setIncomplete:i,incomplete:n,setList:l,list:s})})}),Object(p.jsx)(b.a,{path:"/settings",children:Object(p.jsx)(C,{children:Object(p.jsx)(B,{})})}),Object(p.jsx)(b.a,{path:"*",children:Object(p.jsx)(C,{children:Object(p.jsx)(H,{setIncomplete:i,incomplete:n,setList:l,list:s})})})]})]})}),K=(n(395),n(396),n(397),function(e){Object(a.a)(n,e);var t=Object(s.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(p.jsx)(w,{children:Object(p.jsx)(S,{children:Object(p.jsx)(F,{})})})}}]),n}(l.a.Component)),U=document.getElementById("root");d.a.render(Object(p.jsx)(K,{}),U)}},[[398,1,2]]]);
//# sourceMappingURL=main.c0d1cafb.chunk.js.map